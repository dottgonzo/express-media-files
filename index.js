"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var mediawatch = require("mediawatch");
var Promise = require("bluebird");
var express = require("express");
var bodyParser = require("body-parser");
function default_1(path) {
    var router = express.Router();
    var fflist = new mediawatch.mediafiles({ path: path });
    router.use(bodyParser.json());
    router.use(bodyParser.urlencoded({ extended: true }));
    function getFilesByToken(token) {
        return new Promise(function (resolve, reject) {
        });
    }
    router.get('/user/:token/list', function (req, res) {
        res.json({ list: fflist.list });
    });
    router.get('/user/:token/listjs', function (req, res) {
        res.send('var list=' + JSON.stringify(fflist.list));
    });
    return router;
}
exports.default = default_1;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsdUNBQXdDO0FBQ3hDLGtDQUFtQztBQUNuQyxpQ0FBa0M7QUFDbEMsd0NBQXlDO0FBR3pDLG1CQUF3QixJQUFJO0lBRzVCLElBQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUVoQyxJQUFNLE1BQU0sR0FBRyxJQUFJLFVBQVUsQ0FBQyxVQUFVLENBQUMsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQTtJQUd4RCxNQUFNLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFBO0lBQzdCLE1BQU0sQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUE7SUFNckQseUJBQXlCLEtBQUs7UUFDOUIsTUFBTSxDQUFDLElBQUksT0FBTyxDQUFDLFVBQUMsT0FBTyxFQUFDLE1BQU07UUFLbEMsQ0FBQyxDQUFDLENBQUE7SUFFRixDQUFDO0lBSUQsTUFBTSxDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsRUFBRSxVQUFVLEdBQUcsRUFBRSxHQUFHO1FBQzlDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLEVBQUUsTUFBTSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUE7SUFDbkMsQ0FBQyxDQUFDLENBQUE7SUFDRixNQUFNLENBQUMsR0FBRyxDQUFDLHFCQUFxQixFQUFFLFVBQVUsR0FBRyxFQUFFLEdBQUc7UUFDaEQsR0FBRyxDQUFDLElBQUksQ0FBQyxXQUFXLEdBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQTtJQUNyRCxDQUFDLENBQUMsQ0FBQTtJQUdGLE1BQU0sQ0FBQyxNQUFNLENBQUE7QUFJYixDQUFDO0FBdkNELDRCQXVDQyIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIG1lZGlhd2F0Y2ggZnJvbSAnbWVkaWF3YXRjaCdcbmltcG9ydCAqIGFzIFByb21pc2UgZnJvbSAnYmx1ZWJpcmQnXG5pbXBvcnQgKiBhcyBleHByZXNzIGZyb20gJ2V4cHJlc3MnXG5pbXBvcnQgKiBhcyBib2R5UGFyc2VyIGZyb20gJ2JvZHktcGFyc2VyJ1xuXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHBhdGgpe1xuXG5cbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbmNvbnN0IGZmbGlzdCA9IG5ldyBtZWRpYXdhdGNoLm1lZGlhZmlsZXMoeyBwYXRoOiBwYXRoIH0pXG5cblxucm91dGVyLnVzZShib2R5UGFyc2VyLmpzb24oKSlcbnJvdXRlci51c2UoYm9keVBhcnNlci51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IHRydWUgfSkpXG5cblxuLy8gdXNlIHJlcy5yZW5kZXIgdG8gbG9hZCB1cCBhbiBlanMgdmlldyBmaWxlXG5cblxuZnVuY3Rpb24gZ2V0RmlsZXNCeVRva2VuKHRva2VuKXtcbnJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSxyZWplY3QpPT57XG5cblxuXG5cbn0pXG5cbn1cblxuXG5cbnJvdXRlci5nZXQoJy91c2VyLzp0b2tlbi9saXN0JywgZnVuY3Rpb24gKHJlcSwgcmVzKSB7XG4gICAgcmVzLmpzb24oeyBsaXN0OiBmZmxpc3QubGlzdCB9KVxufSlcbnJvdXRlci5nZXQoJy91c2VyLzp0b2tlbi9saXN0anMnLCBmdW5jdGlvbiAocmVxLCByZXMpIHtcbiAgICByZXMuc2VuZCgndmFyIGxpc3Q9JytKU09OLnN0cmluZ2lmeShmZmxpc3QubGlzdCkpXG59KVxuXG5cbnJldHVybiByb3V0ZXJcblxuXG5cbn0iXX0=
